<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Firewall and Switching Foundation for the Secure Home Lab | alexbakertech</title><meta name=keywords content="pfSense,homelab,networking,firewall,vlan"><meta name=description content="Establishing pfSense on Protectli hardware and preparing VLAN-capable switching for future network segmentation."><meta name=author content="Alex Baker"><link rel=canonical href=https://alexbakertech.com/projects/secure-home-lab/firewall-and-switching-foundation-for-the-secure-home-lab/><link crossorigin=anonymous href=/assets/css/stylesheet.69e78252ff1b9ea740f9bbbf5fd91ad5603675c55fbde661c32b954a21d3d228.css integrity="sha256-aeeCUv8bnqdA+bu/X9ka1WA2dcVfveZhwyuVSiHT0ig=" rel="preload stylesheet" as=style><link rel=icon href=https://alexbakertech.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://alexbakertech.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://alexbakertech.com/favicon-32x32.png><link rel=apple-touch-icon href=https://alexbakertech.com/apple-touch-icon.png><link rel=mask-icon href=https://alexbakertech.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://alexbakertech.com/projects/secure-home-lab/firewall-and-switching-foundation-for-the-secure-home-lab/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:type" content="website"><meta property="og:title" content="alexbakertech"><meta property="og:description" content="Projects in automation, security, and infrastructure"><meta property="og:image" content="/banner.png"><meta property="og:url" content="https://alexbakertech.com/projects/secure-home-lab/firewall-and-switching-foundation-for-the-secure-home-lab/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="alexbakertech"><meta name=twitter:description content="Projects in automation, security, and infrastructure"><meta name=twitter:image content="/banner.png"><meta property="og:url" content="https://alexbakertech.com/projects/secure-home-lab/firewall-and-switching-foundation-for-the-secure-home-lab/"><meta property="og:site_name" content="alexbakertech"><meta property="og:title" content="Firewall and Switching Foundation for the Secure Home Lab"><meta property="og:description" content="Establishing pfSense on Protectli hardware and preparing VLAN-capable switching for future network segmentation."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="projects"><meta property="article:published_time" content="2025-07-08T00:00:00+00:00"><meta property="article:modified_time" content="2025-07-08T00:00:00+00:00"><meta property="article:tag" content="PfSense"><meta property="article:tag" content="Homelab"><meta property="article:tag" content="Networking"><meta property="article:tag" content="Firewall"><meta property="article:tag" content="Vlan"><meta property="og:image" content="https://alexbakertech.com/banner.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://alexbakertech.com/banner.png"><meta name=twitter:title content="Firewall and Switching Foundation for the Secure Home Lab"><meta name=twitter:description content="Establishing pfSense on Protectli hardware and preparing VLAN-capable switching for future network segmentation."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Projects","item":"https://alexbakertech.com/projects/"},{"@type":"ListItem","position":2,"name":"Secure Home Lab","item":"https://alexbakertech.com/projects/secure-home-lab/"},{"@type":"ListItem","position":3,"name":"Firewall and Switching Foundation for the Secure Home Lab","item":"https://alexbakertech.com/projects/secure-home-lab/firewall-and-switching-foundation-for-the-secure-home-lab/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Firewall and Switching Foundation for the Secure Home Lab","name":"Firewall and Switching Foundation for the Secure Home Lab","description":"Establishing pfSense on Protectli hardware and preparing VLAN-capable switching for future network segmentation.","keywords":["pfSense","homelab","networking","firewall","vlan"],"articleBody":"Intro For this project, it’s essential to have a highly configurable firewall and gateway that supports advanced networking features. Specifically, the lab requires:\nVLAN support for network segmentation\nAdvanced routing and NAT rules\nInternal DNS resolution\nTraffic filtering and monitoring capabilities\nThere are many firewalls that meet these criteria, including OPNsense, VyOS, and enterprise-grade hardware solutions. However, I’m most familiar with pfSense, a mature and feature-rich open-source firewall built on FreeBSD. It offers a robust web interface, extensive community support, and deep configuration options.\nThat said, as I continue to build out my homelab environment, I plan to experiment with alternative solutions in controlled scenarios. This project begins with pfSense, but it’s part of a broader effort to explore and compare tools in real-world setups.\nHardware Considerations When selecting hardware for a firewall, it’s important to balance external bandwidth needs (your ISP connection) with internal throughput (the traffic between devices on your network).\nIn my case:\nMy expected internet connection is 400 Mbps down, which is a common mid-range residential speed\nHowever, my internal network will use Gigabit Ethernet (1000 Mbps) hardware, allowing much faster communication between devices within the lab\nThis means that while external downloads are limited to 400 Mbps, internal operations like file transfers, backups, and logging between VMs or hosts can run at full gigabit speed — independent of the internet.\nA note on terminology (often a source of confusion):\nGigabit (Gb) and Megabit (Mb) measure network bandwidth\nGigabyte (GB) and Megabyte (MB) measure file sizes or storage\n1 byte = 8 bits, so a 1000 Mbps network can theoretically transfer ~125 MB per second\nThis distinction helps explain why an internet connection labeled as “400 Mbps” won’t download files at “400 megabytes per second” — it’s a difference in units, not speed inconsistency.\nCore Network Hardware To support this lab’s needs for VLANs, routing, and internal traffic analysis, I’ve selected the following core hardware:\nRouter: Protectli Vault FW4B-0-8-120\nAn affordable, compact mini PC purpose-built for firewall deployments.\nEquipped with 4 Intel NICs, RJ45 console port, USB 3.0, and HDMI output\nIdeal for running pfSense, with enough horsepower to handle IDS/IPS workloads, VLAN routing, and VPN throughput\nSwitch: TP-Link TL-SG1024DE (24-Port Gigabit Easy Smart Switch)\nA budget-friendly, VLAN-capable switch with a good port count.\nSupports 802.1Q VLAN tagging, port mirroring, and basic traffic monitoring\nNot a full Layer 3 managed switch, but sufficient for homelab segmentation and testing\nThese choices reflect a balance between cost, capability, and power efficiency. Both are key considerations for long-running home infrastructure. This also happens to be hardware I already had on hand from previous lab iterations.\nIntegrating the Switch with pfSense Although the TP-Link TL-SG1024DE is not a fully managed Layer 3 switch, it supports 802.1Q VLAN tagging, which is essential for network segmentation in this lab. Later in the project, pfSense will be configured with multiple VLAN interfaces, and this switch will relay that segmentation across physical ports.\nThe switch’s configuration will be kept intentionally minimal — enough to mirror VLAN assignments from pfSense and ensure tagged traffic is properly segmented across connected hosts. This strikes a balance between practical homelab capability and the kind of structured isolation seen in production networks.\nVLAN creation and tagging will be covered in the next post where pfSense interface assignments and switch configuration are aligned.\nHome vs. Industry: What’s Different? While this project aims to replicate many aspects of a production network, it’s important to understand where a residential homelab environment differs from a true enterprise deployment:\nArea Homelab Setup Industrial Network Hardware Low-power appliances (Protectli, TP-Link) Enterprise-grade appliances (Cisco, Juniper, Fortinet) Switching Basic VLAN support, limited QoS/ACLs Full Layer 3 switching, redundant paths, PoE, QoS Power \u0026 Cooling Standard power supply, minimal cooling UPS-backed redundant power, climate control Uptime/SLAs Occasional reboots/upgrades acceptable High availability, failover, 24/7 reliability Scale \u003c 10 devices or VMs 100s–1000s of clients, racks of gear Despite these limitations, a homelab can closely approximate the structure and workflows of a production network. With the right VLAN configuration, firewall policies, and service layering, the lab will replicate key architectural and security concepts used in professional environments.\nBy designing with modularity, segmentation, and observability in mind, this project builds meaningful, real-world experience — even if the equipment is scaled down.\npfSense Installation Summary With hardware selected and goals defined, I installed pfSense CE on the Protectli Vault using the standard USB Memstick installer. The setup process involved:\nFlashing the pfSense ISO to a USB drive Booting via HDMI and keyboard Installing to the internal SSD and assigning interfaces via console Initial layout:\nigb0 → WAN (modem) igb1 → LAN (managed switch) After setting a static LAN IP, I accessed the web UI to:\nRun the setup wizard Configure admin credentials and hostname Verify WAN/LAN routing Set custom DNS servers (I currently prefer Google’s 8.8.8.8 and 8.8.4.4) With connectivity verified, the firewall was ready for advanced configuration: VLANs, firewall rules, IDS, and DNS overrides.\nIn the next post, I’ll walk through configuring VLAN interfaces on pfSense and aligning the switch port assignments to match.\n","wordCount":"843","inLanguage":"en","image":"https://alexbakertech.com/banner.png","datePublished":"2025-07-08T00:00:00Z","dateModified":"2025-07-08T00:00:00Z","author":{"@type":"Person","name":"Alex Baker"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://alexbakertech.com/projects/secure-home-lab/firewall-and-switching-foundation-for-the-secure-home-lab/"},"publisher":{"@type":"Organization","name":"alexbakertech","logo":{"@type":"ImageObject","url":"https://alexbakertech.com/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://alexbakertech.com/ accesskey=h title="alexbakertech (Alt + H)">alexbakertech</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://alexbakertech.com/ title=Home><span>Home</span></a></li><li><a href=https://alexbakertech.com/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://alexbakertech.com/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://alexbakertech.com/about/ title=About><span>About</span></a></li><li><a href=https://alexbakertech.com/contact/ title=Contact><span>Contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Firewall and Switching Foundation for the Secure Home Lab</h1><div class=post-description>Establishing pfSense on Protectli hardware and preparing VLAN-capable switching for future network segmentation.</div><div class=post-meta><span title='2025-07-08 00:00:00 +0000 UTC'>July 8, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Alex Baker</div></header><div class=post-content><h2 id=intro>Intro<a hidden class=anchor aria-hidden=true href=#intro>#</a></h2><p>For this project, it&rsquo;s essential to have a highly configurable firewall and gateway that supports advanced networking features. Specifically, the lab requires:</p><ul><li><p>VLAN support for network segmentation</p></li><li><p>Advanced routing and NAT rules</p></li><li><p>Internal DNS resolution</p></li><li><p>Traffic filtering and monitoring capabilities</p></li></ul><p>There are many firewalls that meet these criteria, including OPNsense, VyOS, and enterprise-grade hardware solutions. However, I&rsquo;m most familiar with <strong>pfSense</strong>, a mature and feature-rich open-source firewall built on FreeBSD. It offers a robust web interface, extensive community support, and deep configuration options.</p><p>That said, as I continue to build out my homelab environment, I plan to experiment with alternative solutions in controlled scenarios. This project begins with pfSense, but it&rsquo;s part of a broader effort to explore and compare tools in real-world setups.</p><hr><h2 id=hardware-considerations>Hardware Considerations<a hidden class=anchor aria-hidden=true href=#hardware-considerations>#</a></h2><p>When selecting hardware for a firewall, it&rsquo;s important to balance <strong>external bandwidth needs</strong> (your ISP connection) with <strong>internal throughput</strong> (the traffic between devices on your network).</p><p>In my case:</p><ul><li><p>My expected internet connection is <strong>400 Mbps down</strong>, which is a common mid-range residential speed</p></li><li><p>However, my internal network will use <strong>Gigabit Ethernet (1000 Mbps)</strong> hardware, allowing much faster communication between devices within the lab</p></li></ul><p>This means that while external downloads are limited to 400 Mbps, internal operations like file transfers, backups, and logging between VMs or hosts can run at full gigabit speed — independent of the internet.</p><p>A note on terminology (often a source of confusion):</p><ul><li><p><strong>Gigabit (Gb)</strong> and <strong>Megabit (Mb)</strong> measure <strong>network bandwidth</strong></p></li><li><p><strong>Gigabyte (GB)</strong> and <strong>Megabyte (MB)</strong> measure <strong>file sizes or storage</strong></p></li><li><p>1 byte = 8 bits, so a 1000 Mbps network can theoretically transfer ~125 MB per second</p></li></ul><p>This distinction helps explain why an internet connection labeled as &ldquo;400 Mbps&rdquo; won&rsquo;t download files at &ldquo;400 megabytes per second&rdquo; — it&rsquo;s a difference in units, not speed inconsistency.</p><hr><h3 id=core-network-hardware>Core Network Hardware<a hidden class=anchor aria-hidden=true href=#core-network-hardware>#</a></h3><p>To support this lab’s needs for VLANs, routing, and internal traffic analysis, I’ve selected the following core hardware:</p><ul><li><p><strong>Router</strong>: <a href=https://protectli.com/product/fw4b/>Protectli Vault FW4B-0-8-120</a><br>An affordable, compact mini PC purpose-built for firewall deployments.</p><ul><li><p>Equipped with <strong>4 Intel NICs</strong>, <strong>RJ45 console port</strong>, <strong>USB 3.0</strong>, and <strong>HDMI output</strong></p></li><li><p>Ideal for running <strong>pfSense</strong>, with enough horsepower to handle IDS/IPS workloads, VLAN routing, and VPN throughput</p></li></ul></li><li><p><strong>Switch</strong>: TP-Link TL-SG1024DE (24-Port Gigabit Easy Smart Switch)<br>A <strong>budget-friendly</strong>, VLAN-capable switch with a good port count.</p><ul><li><p>Supports <strong>802.1Q VLAN tagging</strong>, port mirroring, and basic traffic monitoring</p></li><li><p>Not a full Layer 3 managed switch, but sufficient for homelab segmentation and testing</p></li></ul></li></ul><p>These choices reflect a balance between <strong>cost, capability, and power efficiency</strong>. Both are key considerations for long-running home infrastructure. This also happens to be hardware I already had on hand from previous lab iterations.</p><hr><h2 id=integrating-the-switch-with-pfsense>Integrating the Switch with pfSense<a hidden class=anchor aria-hidden=true href=#integrating-the-switch-with-pfsense>#</a></h2><p>Although the TP-Link TL-SG1024DE is not a fully managed Layer 3 switch, it <strong>supports 802.1Q VLAN tagging</strong>, which is essential for network segmentation in this lab. Later in the project, pfSense will be configured with multiple VLAN interfaces, and this switch will relay that segmentation across physical ports.</p><p>The switch’s configuration will be kept intentionally minimal — enough to <strong>mirror VLAN assignments</strong> from pfSense and ensure tagged traffic is properly segmented across connected hosts. This strikes a balance between <strong>practical homelab capability</strong> and the kind of <strong>structured isolation</strong> seen in production networks.</p><blockquote><p>VLAN creation and tagging will be covered in the next post where pfSense interface assignments and switch configuration are aligned.</p></blockquote><hr><h2 id=home-vs-industry-whats-different>Home vs. Industry: What&rsquo;s Different?<a hidden class=anchor aria-hidden=true href=#home-vs-industry-whats-different>#</a></h2><p>While this project aims to replicate many aspects of a production network, it&rsquo;s important to understand where a residential homelab environment differs from a true enterprise deployment:</p><table><thead><tr><th>Area</th><th>Homelab Setup</th><th>Industrial Network</th></tr></thead><tbody><tr><td><strong>Hardware</strong></td><td>Low-power appliances (Protectli, TP-Link)</td><td>Enterprise-grade appliances (Cisco, Juniper, Fortinet)</td></tr><tr><td><strong>Switching</strong></td><td>Basic VLAN support, limited QoS/ACLs</td><td>Full Layer 3 switching, redundant paths, PoE, QoS</td></tr><tr><td><strong>Power & Cooling</strong></td><td>Standard power supply, minimal cooling</td><td>UPS-backed redundant power, climate control</td></tr><tr><td><strong>Uptime/SLAs</strong></td><td>Occasional reboots/upgrades acceptable</td><td>High availability, failover, 24/7 reliability</td></tr><tr><td><strong>Scale</strong></td><td>&lt; 10 devices or VMs</td><td>100s–1000s of clients, racks of gear</td></tr></tbody></table><p>Despite these limitations, a homelab can <strong>closely approximate the structure and workflows</strong> of a production network. With the right VLAN configuration, firewall policies, and service layering, the lab will replicate key architectural and security concepts used in professional environments.</p><p>By designing with <strong>modularity, segmentation, and observability</strong> in mind, this project builds meaningful, real-world experience — even if the equipment is scaled down.</p><hr><h2 id=pfsense-installation-summary>pfSense Installation Summary<a hidden class=anchor aria-hidden=true href=#pfsense-installation-summary>#</a></h2><p>With hardware selected and goals defined, I installed <strong>pfSense CE</strong> on the Protectli Vault using the standard USB Memstick installer. The setup process involved:</p><ul><li>Flashing the pfSense ISO to a USB drive</li><li>Booting via HDMI and keyboard</li><li>Installing to the internal SSD and assigning interfaces via console</li></ul><p>Initial layout:</p><ul><li><code>igb0</code> → WAN (modem)</li><li><code>igb1</code> → LAN (managed switch)</li></ul><p>After setting a static LAN IP, I accessed the web UI to:</p><ul><li>Run the setup wizard</li><li>Configure admin credentials and hostname</li><li>Verify WAN/LAN routing</li><li>Set custom DNS servers (I currently prefer Google&rsquo;s 8.8.8.8 and 8.8.4.4)</li></ul><p>With connectivity verified, the firewall was ready for advanced configuration: <strong>VLANs, firewall rules, IDS, and DNS overrides</strong>.</p><p>In the next post, I&rsquo;ll walk through configuring VLAN interfaces on pfSense and aligning the switch port assignments to match.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://alexbakertech.com/tags/pfsense/>PfSense</a></li><li><a href=https://alexbakertech.com/tags/homelab/>Homelab</a></li><li><a href=https://alexbakertech.com/tags/networking/>Networking</a></li><li><a href=https://alexbakertech.com/tags/firewall/>Firewall</a></li><li><a href=https://alexbakertech.com/tags/vlan/>Vlan</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://alexbakertech.com/>alexbakertech</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>function updateBannerByTheme(){const e=document.getElementById("hero-banner");if(!e)return;const t=localStorage.getItem("pref-theme")||(document.body.classList.contains("dark")?"dark":"light");e.src=t==="dark"?e.dataset.dark:e.dataset.light}function updateFaviconByTheme(){const e=document.querySelector("link[rel~='icon']");if(!e)return;const n=localStorage.getItem("pref-theme")||(document.body.classList.contains("dark")?"dark":"light"),s=n==="dark"?"/favicon.png":"/favicon-inverted.png",t=new URL(s,window.location.origin).href;e.href!==t&&(e.href=t)}document.getElementById("theme-toggle")?.addEventListener("click",()=>{setTimeout(()=>{updateBannerByTheme(),updateFaviconByTheme()},10)}),updateBannerByTheme(),updateFaviconByTheme()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>